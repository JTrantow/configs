#
# Encoder test illustrating problems with quad enable.
#
# Use: halcmd -f halrun_encoder_test
#
loadrt hostmot2
loadrt hm2_eth board_ip="10.10.10.10" config=" num_encoders=4 num_stepgens=4" 
setp    hm2_7i92.0.watchdog.timeout_ns 5000000

#
# Setup signals to cause encoder quad faults.
#
net encoder-pulses => hm2_7i92.0.encoder.input-a hm2_7i92.0.encoder.input-b 
net encoder-quad-status <= hm2_7i92.0.encoder.quad-error
net encoder-quad-enable => hm2_7i92.0.encoder.quad-error-enable

#
# Verify quad-error is initialize correctly. (It is.)
#
gets encoder-quad-status
gets encoder-quad-enable

unload all